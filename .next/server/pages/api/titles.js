"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/titles";
exports.ids = ["pages/api/titles"];
exports.modules = {

/***/ "https-proxy-agent":
/*!************************************!*\
  !*** external "https-proxy-agent" ***!
  \************************************/
/***/ ((module) => {

module.exports = require("https-proxy-agent");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = import("axios");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "(api)/./pages/api/titles.ts":
/*!*****************************!*\
  !*** ./pages/api/titles.ts ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var https_proxy_agent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! https-proxy-agent */ \"https-proxy-agent\");\n/* harmony import */ var https_proxy_agent__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(https_proxy_agent__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__]);\naxios__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst BASE_URL = \"https://new.myfreemp3juices.cc/api/\";\nconst ENDPOINT = \"api_search.php?callback=jQuery2130003814019662980783_1697629885270\";\nconst URL = `${BASE_URL}${ENDPOINT}`;\nconst INTERS_CSV_FILENAME = \"inters.csv\";\nconst TIMEOUT = 4500;\nasync function postData(url, interAddress, data) {\n    // As Axios timeout is not working with https-proxy-agent, we also need to use a custom timeout.\n    const source = axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].CancelToken.source();\n    const timeout = setTimeout(()=>{\n        source.cancel();\n        console.log(\"Request canceled due to timeout\");\n    }, TIMEOUT);\n    try {\n        const interAgent = new https_proxy_agent__WEBPACK_IMPORTED_MODULE_1__.HttpsProxyAgent(interAddress);\n        const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(url, data, {\n            httpAgent: interAgent,\n            httpsAgent: interAgent,\n            timeout: TIMEOUT,\n            headers: {\n                \"Content-Type\": \"multipart/form-data\"\n            },\n            maxContentLength: 100 * 1024,\n            cancelToken: source.token\n        });\n        clearTimeout(timeout);\n        return response.data;\n    } catch (error) {\n        clearTimeout(timeout);\n        if (axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isAxiosError(error)) {\n            if (axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isCancel(error)) {\n                console.log(\"Request canceled:\", error.message);\n            } else {\n                console.log(`Failed to post data: ${error.message}`);\n            }\n            throw new Error(`Failed to post data: ${error.message}`);\n        } else {\n            console.log(\"An unknown error occurred\");\n            throw error;\n        }\n    }\n}\nfunction extractStringBetweenFirstAndLastParentheses(str) {\n    const firstParenthesesIndex = str.indexOf(\"(\");\n    const lastParenthesesIndex = str.lastIndexOf(\")\");\n    return str.slice(firstParenthesesIndex + 1, lastParenthesesIndex);\n}\nfunction getFastestInterFromFile() {\n    const inters = fs__WEBPACK_IMPORTED_MODULE_2___default().readFileSync(INTERS_CSV_FILENAME, \"utf-8\");\n    const intersArray = inters.split(\"\\n\");\n    const fastestInter = intersArray.reduce((acc, inter)=>{\n        const [url, time] = inter.split(\",\");\n        if (!acc || parseFloat(time) < parseFloat(acc.time)) {\n            return {\n                url,\n                time\n            };\n        }\n        return acc;\n    }, null);\n    return fastestInter ? fastestInter.url : \"\";\n}\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        res.status(405).json({\n            error: \"Method not allowed\"\n        });\n        return;\n    }\n    const query = req.query.query;\n    if (typeof query !== \"string\") {\n        res.status(400).json({\n            error: \"Query parameter must be a string\"\n        });\n        return;\n    }\n    if (!query.trim()) {\n        res.status(400).json({\n            error: \"Query parameter is required\"\n        });\n        return;\n    }\n    let inter = req.query.inter;\n    if (typeof inter !== \"string\" || !inter.trim()) {\n        inter = getFastestInterFromFile();\n        if (!inter) {\n            res.status(500).json({\n                error: \"No inters available\"\n            });\n            return;\n        }\n    }\n    console.log(`Using inter: ${inter}`);\n    let data = {\n        q: query,\n        page: \"0\"\n    };\n    const MAX_RETRIES = 3;\n    for(let i = 0; i < MAX_RETRIES; i++){\n        console.log(`Try number ${i + 1}`);\n        try {\n            const result = await postData(URL, inter, data);\n            const jsonText = extractStringBetweenFirstAndLastParentheses(result);\n            const json = JSON.parse(jsonText);\n            if (json[\"response\"] !== null) {\n                res.status(200).json(json[\"response\"]);\n                return;\n            } else {\n                console.log(`Response null with proxy ${inter}. Retrying`);\n            }\n        } catch (error) {\n            const errorMessagePrefixe = `Failed to fetch data with inter ${inter}: `;\n            let errorMessageBody = \"\";\n            if (error instanceof Error) {\n                errorMessageBody = error.message;\n            } else {\n                errorMessageBody = \"An unknown error occurred\";\n            }\n            res.status(500).json({\n                error: `${errorMessagePrefixe}${errorMessageBody}`\n            });\n            return;\n        }\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSxFQUFFO2dCQUM3QkgsR0FBRyxDQUFDRSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ0EsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7Z0JBQ3ZDLE9BQU87WUFDVCxPQUFPO2dCQUNMeEMsT0FBTyxDQUFDQyxHQUFHLENBQUMsQ0FBQyx5QkFBeUIsRUFBRStCLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO1lBQzdELENBQUM7UUFDSCxFQUFFLE9BQU9wQixLQUFLLEVBQUU7WUFDZCxNQUFNdUMsbUJBQW1CLEdBQUcsQ0FBQyxnQ0FBZ0MsRUFBRW5CLEtBQUssQ0FBQyxFQUFFLENBQUM7WUFDeEUsSUFBSW9CLGdCQUFnQixHQUFHLEVBQUU7WUFDekIsSUFBSXhDLEtBQUssWUFBWUksS0FBSyxFQUFFO2dCQUMxQm9DLGdCQUFnQixHQUFHeEMsS0FBSyxDQUFDRyxPQUFPLENBQUM7WUFDbkMsT0FBTztnQkFDTHFDLGdCQUFnQixHQUFHLDJCQUEyQixDQUFDO1lBQ2pELENBQUM7WUFDRGYsR0FBRyxDQUNBRSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQ1hDLElBQUksQ0FBQztnQkFBRTVCLEtBQUssRUFBRSxDQUFDLEVBQUV1QyxtQkFBbUIsQ0FBQyxFQUFFQyxnQkFBZ0IsQ0FBQyxDQUFDO2FBQUUsQ0FBQyxDQUFDO1lBQ2hFLE9BQU87UUFDVCxDQUFDO0lBQ0gsQ0FBQztBQUNILENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kaWdnZXJzLWRlbGlnaHQtbmV4dGpzLy4vcGFnZXMvYXBpL3RpdGxlcy50cz9mYzkwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tIFwibmV4dFwiO1xuaW1wb3J0IGF4aW9zLCB7IENhbmNlbFRva2VuU291cmNlIH0gZnJvbSBcImF4aW9zXCI7XG5pbXBvcnQgeyBIdHRwc1Byb3h5QWdlbnQgfSBmcm9tIFwiaHR0cHMtcHJveHktYWdlbnRcIjtcbmltcG9ydCBmcyBmcm9tIFwiZnNcIjtcblxuY29uc3QgQkFTRV9VUkwgPSBcImh0dHBzOi8vbmV3Lm15ZnJlZW1wM2p1aWNlcy5jYy9hcGkvXCI7XG5jb25zdCBFTkRQT0lOVCA9XG4gIFwiYXBpX3NlYXJjaC5waHA/Y2FsbGJhY2s9alF1ZXJ5MjEzMDAwMzgxNDAxOTY2Mjk4MDc4M18xNjk3NjI5ODg1MjcwXCI7XG5jb25zdCBVUkwgPSBgJHtCQVNFX1VSTH0ke0VORFBPSU5UfWA7XG5jb25zdCBJTlRFUlNfQ1NWX0ZJTEVOQU1FID0gXCJpbnRlcnMuY3N2XCI7XG5jb25zdCBUSU1FT1VUID0gNDUwMDtcblxuYXN5bmMgZnVuY3Rpb24gcG9zdERhdGEoXG4gIHVybDogc3RyaW5nLFxuICBpbnRlckFkZHJlc3M6IHN0cmluZyxcbiAgZGF0YTogUmVjb3JkPHN0cmluZywgYW55PlxuKTogUHJvbWlzZTxhbnk+IHtcbiAgLy8gQXMgQXhpb3MgdGltZW91dCBpcyBub3Qgd29ya2luZyB3aXRoIGh0dHBzLXByb3h5LWFnZW50LCB3ZSBhbHNvIG5lZWQgdG8gdXNlIGEgY3VzdG9tIHRpbWVvdXQuXG4gIGNvbnN0IHNvdXJjZTogQ2FuY2VsVG9rZW5Tb3VyY2UgPSBheGlvcy5DYW5jZWxUb2tlbi5zb3VyY2UoKTtcbiAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIHNvdXJjZS5jYW5jZWwoKTtcbiAgICBjb25zb2xlLmxvZyhcIlJlcXVlc3QgY2FuY2VsZWQgZHVlIHRvIHRpbWVvdXRcIik7XG4gIH0sIFRJTUVPVVQpO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgaW50ZXJBZ2VudCA9IG5ldyBIdHRwc1Byb3h5QWdlbnQoaW50ZXJBZGRyZXNzKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QodXJsLCBkYXRhLCB7XG4gICAgICBodHRwQWdlbnQ6IGludGVyQWdlbnQsXG4gICAgICBodHRwc0FnZW50OiBpbnRlckFnZW50LFxuICAgICAgdGltZW91dDogVElNRU9VVCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJtdWx0aXBhcnQvZm9ybS1kYXRhXCIsXG4gICAgICB9LFxuICAgICAgbWF4Q29udGVudExlbmd0aDogMTAwICogMTAyNCwgLy8gMTAwIEtCXG4gICAgICBjYW5jZWxUb2tlbjogc291cmNlLnRva2VuLFxuICAgIH0pO1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgaWYgKGF4aW9zLmlzQXhpb3NFcnJvcihlcnJvcikpIHtcbiAgICAgIGlmIChheGlvcy5pc0NhbmNlbChlcnJvcikpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJSZXF1ZXN0IGNhbmNlbGVkOlwiLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBGYWlsZWQgdG8gcG9zdCBkYXRhOiAkeyhlcnJvciBhcyBhbnkpLm1lc3NhZ2V9YCk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBwb3N0IGRhdGE6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkXCIpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RTdHJpbmdCZXR3ZWVuRmlyc3RBbmRMYXN0UGFyZW50aGVzZXMoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBmaXJzdFBhcmVudGhlc2VzSW5kZXggPSBzdHIuaW5kZXhPZihcIihcIik7XG4gIGNvbnN0IGxhc3RQYXJlbnRoZXNlc0luZGV4ID0gc3RyLmxhc3RJbmRleE9mKFwiKVwiKTtcbiAgcmV0dXJuIHN0ci5zbGljZShmaXJzdFBhcmVudGhlc2VzSW5kZXggKyAxLCBsYXN0UGFyZW50aGVzZXNJbmRleCk7XG59XG5cbmZ1bmN0aW9uIGdldEZhc3Rlc3RJbnRlckZyb21GaWxlKCk6IHN0cmluZyB7XG4gIGNvbnN0IGludGVycyA9IGZzLnJlYWRGaWxlU3luYyhJTlRFUlNfQ1NWX0ZJTEVOQU1FLCBcInV0Zi04XCIpO1xuICBjb25zdCBpbnRlcnNBcnJheSA9IGludGVycy5zcGxpdChcIlxcblwiKTtcbiAgY29uc3QgZmFzdGVzdEludGVyID0gaW50ZXJzQXJyYXkucmVkdWNlKChhY2MsIGludGVyKSA9PiB7XG4gICAgY29uc3QgW3VybCwgdGltZV0gPSBpbnRlci5zcGxpdChcIixcIik7XG4gICAgaWYgKCFhY2MgfHwgcGFyc2VGbG9hdCh0aW1lKSA8IHBhcnNlRmxvYXQoYWNjLnRpbWUpKSB7XG4gICAgICByZXR1cm4geyB1cmwsIHRpbWUgfTtcbiAgICB9XG4gICAgcmV0dXJuIGFjYztcbiAgfSwgbnVsbCBhcyB7IHVybDogc3RyaW5nOyB0aW1lOiBzdHJpbmcgfSB8IG51bGwpO1xuICByZXR1cm4gZmFzdGVzdEludGVyID8gZmFzdGVzdEludGVyLnVybCA6IFwiXCI7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIoXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlXG4pIHtcbiAgaWYgKHJlcS5tZXRob2QgIT09IFwiR0VUXCIpIHtcbiAgICByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiBcIk1ldGhvZCBub3QgYWxsb3dlZFwiIH0pO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHF1ZXJ5ID0gcmVxLnF1ZXJ5LnF1ZXJ5O1xuICBpZiAodHlwZW9mIHF1ZXJ5ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJRdWVyeSBwYXJhbWV0ZXIgbXVzdCBiZSBhIHN0cmluZ1wiIH0pO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoIXF1ZXJ5LnRyaW0oKSkge1xuICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiUXVlcnkgcGFyYW1ldGVyIGlzIHJlcXVpcmVkXCIgfSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IGludGVyID0gcmVxLnF1ZXJ5LmludGVyO1xuICBpZiAodHlwZW9mIGludGVyICE9PSBcInN0cmluZ1wiIHx8ICFpbnRlci50cmltKCkpIHtcbiAgICBpbnRlciA9IGdldEZhc3Rlc3RJbnRlckZyb21GaWxlKCk7XG4gICAgaWYgKCFpbnRlcikge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJObyBpbnRlcnMgYXZhaWxhYmxlXCIgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIGNvbnNvbGUubG9nKGBVc2luZyBpbnRlcjogJHtpbnRlcn1gKTtcblxuICBsZXQgZGF0YSA9IHtcbiAgICBxOiBxdWVyeSxcbiAgICBwYWdlOiBcIjBcIixcbiAgfTtcblxuICBjb25zdCBNQVhfUkVUUklFUyA9IDM7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgTUFYX1JFVFJJRVM7IGkrKykge1xuICAgIGNvbnNvbGUubG9nKGBUcnkgbnVtYmVyICR7aSArIDF9YCk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdDogc3RyaW5nID0gYXdhaXQgcG9zdERhdGEoVVJMLCBpbnRlciwgZGF0YSk7XG4gICAgICBjb25zdCBqc29uVGV4dCA9IGV4dHJhY3RTdHJpbmdCZXR3ZWVuRmlyc3RBbmRMYXN0UGFyZW50aGVzZXMocmVzdWx0KTtcbiAgICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKGpzb25UZXh0KTtcbiAgICAgIGlmIChqc29uW1wicmVzcG9uc2VcIl0gIT09IG51bGwpIHtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oanNvbltcInJlc3BvbnNlXCJdKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coYFJlc3BvbnNlIG51bGwgd2l0aCBwcm94eSAke2ludGVyfS4gUmV0cnlpbmdgKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlUHJlZml4ZSA9IGBGYWlsZWQgdG8gZmV0Y2ggZGF0YSB3aXRoIGludGVyICR7aW50ZXJ9OiBgO1xuICAgICAgbGV0IGVycm9yTWVzc2FnZUJvZHkgPSBcIlwiO1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlQm9keSA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlcnJvck1lc3NhZ2VCb2R5ID0gXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkXCI7XG4gICAgICB9XG4gICAgICByZXNcbiAgICAgICAgLnN0YXR1cyg1MDApXG4gICAgICAgIC5qc29uKHsgZXJyb3I6IGAke2Vycm9yTWVzc2FnZVByZWZpeGV9JHtlcnJvck1lc3NhZ2VCb2R5fWAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiYXhpb3MiLCJIdHRwc1Byb3h5QWdlbnQiLCJmcyIsIkJBU0VfVVJMIiwiRU5EUE9JTlQiLCJVUkwiLCJJTlRFUlNfQ1NWX0ZJTEVOQU1FIiwiVElNRU9VVCIsInBvc3REYXRhIiwidXJsIiwiaW50ZXJBZGRyZXNzIiwiZGF0YSIsInNvdXJjZSIsIkNhbmNlbFRva2VuIiwidGltZW91dCIsInNldFRpbWVvdXQiLCJjYW5jZWwiLCJjb25zb2xlIiwibG9nIiwiaW50ZXJBZ2VudCIsInJlc3BvbnNlIiwicG9zdCIsImh0dHBBZ2VudCIsImh0dHBzQWdlbnQiLCJoZWFkZXJzIiwibWF4Q29udGVudExlbmd0aCIsImNhbmNlbFRva2VuIiwidG9rZW4iLCJjbGVhclRpbWVvdXQiLCJlcnJvciIsImlzQXhpb3NFcnJvciIsImlzQ2FuY2VsIiwibWVzc2FnZSIsIkVycm9yIiwiZXh0cmFjdFN0cmluZ0JldHdlZW5GaXJzdEFuZExhc3RQYXJlbnRoZXNlcyIsInN0ciIsImZpcnN0UGFyZW50aGVzZXNJbmRleCIsImluZGV4T2YiLCJsYXN0UGFyZW50aGVzZXNJbmRleCIsImxhc3RJbmRleE9mIiwic2xpY2UiLCJnZXRGYXN0ZXN0SW50ZXJGcm9tRmlsZSIsImludGVycyIsInJlYWRGaWxlU3luYyIsImludGVyc0FycmF5Iiwic3BsaXQiLCJmYXN0ZXN0SW50ZXIiLCJyZWR1Y2UiLCJhY2MiLCJpbnRlciIsInRpbWUiLCJwYXJzZUZsb2F0IiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJxdWVyeSIsInRyaW0iLCJxIiwicGFnZSIsIk1BWF9SRVRSSUVTIiwiaSIsInJlc3VsdCIsImpzb25UZXh0IiwiSlNPTiIsInBhcnNlIiwiZXJyb3JNZXNzYWdlUHJlZml4ZSIsImVycm9yTWVzc2FnZUJvZHkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/titles.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/titles.ts"));
module.exports = __webpack_exports__;

})();